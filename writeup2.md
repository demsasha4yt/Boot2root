# Method 2

Для началла нам нееобходимо залогиниться под пользоваетелем через ssh.
Метод описан в writeup1.

Используем уязвимости системы.
Ядро системы у нас 3.2.0-91-generic-pae.

Так как у нас есть доступ к пользователю laurie, работать будем с него.
Ищем уязвимости на сайте www.exploit-db.com
Находим эксплойт https://www.exploit-db.com/exploits/40839

Этот эксплойт использует в качестве основы эксплойт «pokemon» уязвимости dirtycow 
и автоматически генерирует новый файл /etc/passwd. 
С помощью данной уязвимости локальный пользователь может повысить свои привилегии 
из-за ошибки гонки в реализации механизма копирования при записи (COW) 
для страниц памяти, помеченных флагом Dirty bit (изменённая память).

Данный эксплойт подменяет файл /etc/passwd 
и копирует его в /tmp/passwd.bak (чтобы не потерять данные пользователей).

Так как нам нужно получить доступ к root, немного изменяем файл, т.к. нам стоит пользователь firefart.

Компилируем файл
gcc -pthread dirty.c -o dirty -lcrypt

Запускаем ./dirty my-new-password

И логинимся в root через su с нашим новым паролем)
Так как у нас ISO, восстанавливать бекап passwd необязательно.
